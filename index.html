<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | templete_test</title>
  </head>
  <body style="text-align: center; padding: 0; margin: 0;">
    <style>
      #unity-container {position: absolute}
      #unity-container.unity_desktop { left: 50%; top: 50%; transform: translate(-50%, -50%) }
      #unity-container.unity-mobile { width: 100%; height: 100% }
      #unity-canvas { background: #231F20 }
      .unity-mobile #unity-canvas { width: 100%; height: 100% }
    </style>
    <div id = "unity-container" class="unity-desktop">
      <canvas id="unity-canvas" width= 960 height= 600></canvas>
    </div>
    <script src="Build/test.loader.js"></script>
    <script>
      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas")


      function checkMobile(){
        var varUA = navigator.userAgent.toLowerCase();

        if (varUA.indexOf('android') > -1){
          container.className = "unity-mobile";
          return 'android';
        }
        else if (varUA.indexOf('iphone') > -1 || varUA.indexOf("ipad") > -1 ||varUA.indexOf("ipod") > -1){
          container.className = "unity-mobile";
          return 'ios';
        }
        else{
          canvas.style.width = "960px";
          canvas.style.height = "600px";
          container.className = "unity-mobile";
          return 'other';
        }
      }

      function checkChrome(){
        var varUA = navigator.userAgent.toLowerCase();

        varUA = varUA.split(' ')

        if (varUA[varUA.length - 1].startsWith('safari')){
          return 'chrome';
        }
        else{
          return 'other';
        }
      }

      function action_app(){
        var result_check_mob = checkMobile();
        var result_check_chr = checkChrome();
        var visitedAt = (new Date()).getTime();

        if (result_check_mob == 'android' && result_check_chr == 'other'){
          location.href='intent://'+location.href.replace(/https?:\/\//i,'')+'#Intent;scheme=http;package=com.android.chrome;end';
        }
        else if (result_check_mob == 'ios' && result_check_chr == 'other'){
          setTimeout( function () {
					  if ( ( new Date() ).getTime() - visitedAt < 3000 ) {
						  location.href = "https://itunes.apple.com/app/id535886823";
					  }
				  } ,2500 );
				  setTimeout( function () {
					  location.href = "googlechrome://" + location.href.replace(/https?:\/\//i,'');
				  } ,0 );
        }
      }

      action_app();
      var canvas = document.querySelector("#unity-canvas");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      createUnityInstance(document.querySelector("#unity-canvas"), {
        dataUrl: "Build/test.data",
        frameworkUrl: "Build/test.framework.js",
        codeUrl: "Build/test.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "templete_test",
        productVersion: "0.1",
        // matchWebGLToCanvasSize: false, // Uncomment this to separately control WebGL canvas render size and DOM element size.
        // devicePixelRatio: 1, // Uncomment this to override low DPI rendering on high DPI displays.
      });
    </script>
  </body>
</html>
